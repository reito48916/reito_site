# Github Pages + MkDocsでサイト構築

## ターゲット
- ブログや画像集などの静的なコンテンツをWeb上に公開したい人
- その中でもこんな人におすすめ！
    - GitやGitHubが好き
    - マークダウンが好き
    - cssが好き

## 概念説明
Github Pagesは、GitHubが提供する**特定のブランチの中身を静的Webサイトとして公開する**仕組み。ブランチのルートにindex.htmlがあればそのGithub Pagesにアクセスした場合それがレスポンスとして返るシンプルなもの。


となればあとはその型式に合うような、
```lang
「ユーザーが構築・編集しやすい原稿のファイル体系」 -> 「Github Pagesに沿ったファイル体系」
```
に変換してくれるツールがあれば、原稿を書いて、ツールを用いて変換したファイル群をリポジトリとしてGithubに上げれば、それだけでサイトが公開できる、というわけだ。

それをやってくれるのが、表題のMkDocsというツールだ。とても導入がクイックなので、まずは動かしてみるのが早い。

## MkDocsの導入
これ自体の導入・テストはGithub無しでも出来る。まず、作業環境にpythonが必要だ。多分新しくてダメなこともないだろうが、まずpythonをインストールして使える状態にする。それじたいのやりかたは…さすがにググってほしい。

pythonが使えるようになったら、pipで必要なライブラリをインストールする。pythonが有効なコマンドラインにて

```lang
$pip install mkdocs
$pip install mkdocs-material
$pip install "click==8.2.1"
```
とすると必要なものが揃う。最後のclickというもののバージョン指定については、最新のclickでは不具合がでるためわざとダウングレードさせるためのもの。

導入したら、コマンドライン上でローカルで作業をしたいディレクトリに移動して
```lang
$mkdocs new
```
とすると、「ユーザーが編集したいひな形」がそのディレクトリに作成される。その後
```lang
$mkdocs serve
```
とすると
```lang
INFO    -  Documentation built in 0.41 seconds
INFO    -  [17:09:32] Watching paths for changes: 'docs', 'mkdocs.yml'
INFO    -  [17:09:32] Serving on http://127.0.0.1:8000/
```
というようなログが出てプログラムが起動中となる。ユーザーの原稿となるファイル群を、htmlなどから成る後にGithub Pagesがwebサイトとして取り扱うファイル群へと変換、すなわち**ビルド**して、自分のコンピュータ上に構築された仮想的なwebサーバ上でそれをプレビューするためのコマンドである。(なお、$mkdocs buildでビルド単体もできる)

実際http://127.0.0.1:8000/にアクセスしてみると、ひな形原稿をビルドして得られたファイル群からなる「webサイト」が確認できる。

![MkDocsのひな型ページプレビュー](/images/disposable/2025120501.png){ .screenshot }

あとはMKDocsのリファレンスに従いこの「原稿」を記述していくのだが…ここから先は公式リファレンスに譲ろう。 
参考：[MkDocs:ユーザーガイド](https://www.mkdocs.org/user-guide/)


## Github Pagesへの適用
原稿が出来てローカルで確認できたら後はデプロイするだけ。Githubで新しい公開レポジトリを作って、それをクローンしてきてさっきまでやっていた作業ディレクトリを丸ごとぶち込む。するとGitのルートディレクトリに
- docs/
- site/
- mkdocs.yml
がある状態になるので、ここにsite/を除外する.gitignoreを追加してひとまずcommitとpushをしておく。

その後、
```lang
$mkdocs gh-deploy
```
を叩くことで、このsite/以下にあるhtmlとかのGithub Pages用の各ファイル群がそのリポジトリのGithub Pagesとして公開される用の領域にアップロードされる！これでもうあとはこのサイトのように、公開されているそのリポジトリのGithub Pagesにアクセスすればプレビューしていたのと同じように確認が出来るようになっているというわけだ。

以上、超簡単でやりやすいブログのようなサイト立ち上げの手段の一つ、Github Pages + MKDocsの紹介でした。